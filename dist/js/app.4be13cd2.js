(function(t){function e(e){for(var s,r,n=e[0],l=e[1],c=e[2],d=0,m=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},o=[];function r(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"46943bf5"}[t]+".js"}function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=i[t]=[e,s]}));e.push(a[2]=s);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.src=r(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",c.name="ChunkLoadError",c.type=s,c.request=o,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"096b":function(t,e,a){},"0ce1":function(t,e,a){},1:function(t,e){},"1c80":function(t,e,a){},"2dc3":function(t,e,a){"use strict";var s=a("d170"),i=a.n(s);i.a},"2e93":function(t,e){},"312f":function(t,e,a){"use strict";var s=a("ff9c"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("45fc");var s=a("53ca"),i=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("28dd")),o=a("8832"),r=a.n(o),n=a("4a7a"),l=a.n(n),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nprogress-container"),a("app-header"),a("router-view"),a("app-footer")],1)},d=[],u=(a("4989"),a("ab8b"),a("6dfc"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[s("div",{staticClass:"header-area "},[s("div",{staticClass:"main-header-area",attrs:{id:"sticky-header"}},[s("div",{staticClass:"container-fluid "},[s("div",{staticClass:"header_bottom_border"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-sm-12"},[s("nav",{staticClass:"main-menu navbar navbar-expand-lg navbar-dark"},[s("div",{staticClass:"logo"},[s("router-link",{attrs:{to:"/"}},[s("img",{attrs:{src:a("c037"),alt:"",width:"60px",alt:"background"}})])],1),t._m(0),this.$store.getters.data.signedIn?s("div",{staticClass:"offset-2 col-9 collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav text-center"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/"}},[t._v("Home")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/books"}},[t._v("books")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/my_books"}},[t._v("My books")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:{name:"BorrowRequests"}}},[t._v("Borrow Requests")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:{name:"LendRequests"}}},[t._v("Lend Requests")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/books/new"}},[t._v("Add book")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/notifications"}},[t._v("Notifications "),s("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(this.notificationsCount))])])],1),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#","data-toggle":"collapse","data-target":".navbar-collapse.show"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Logout")])])])]):t._e(),this.$store.getters.data.signedIn?t._e():s("div",{staticClass:"offset-4 col-7 collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav text-center"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/"}},[t._v("Home")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/books"}},[t._v("books")])],1),this.$store.getters.data.signedIn?t._e():s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/login"}},[t._v("Login")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":".navbar-collapse.show",to:"/signup"}},[t._v("Register")])],1)])])])])])])])])])])}),m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],p=a("2b0e"),v=a("2f62");p["default"].use(v["a"]);var g=new v["a"].Store({state:{loading:!1,signedIn:"true"==localStorage.signedIn,user_id:localStorage.user_id,accessToken:localStorage.accessToken,client:localStorage.client,uid:localStorage.uid,expiry:localStorage.expiry,bearer:localStorage.bearer,latitude:localStorage.latitude,longitude:localStorage.longitude,notificationsCount:0,book:{}},getters:{data:function(t){return{accessToken:t.accessToken,uid:t.uid,client:t.client,signedIn:t.signedIn,user_id:t.user_id,latitude:t.latitude,longitude:t.longitude,notificationsCount:t.notificationsCount,book:t.book}}},mutations:{signIn:function(t,e){var a=e.user_id,s=e.accessToken,i=e.client,o=e.uid,r=e.expiry,n=e.bearer;localStorage.signedIn=!0,localStorage.user_id=a,t.signedIn=!0,t.user_id=a,t.accessToken=s,t.client=i,t.uid=o,t.expiry=r,t.bearer=n},signOut:function(t){localStorage.accessToken=null,localStorage.client=null,localStorage.uid=null,localStorage.expiry=null,localStorage.bearer=null,localStorage.signedIn=!1,localStorage.user_id=null,t.signedIn=!1,t.user_id=null,t.accessToken=null,t.client=null,t.uid=null,t.expiry=null,t.bearer=null},setLocation:function(t,e){var a=e.latitude,s=e.longitude;localStorage.latitude=a,localStorage.longitude=s,t.latitude=a,t.longitude=s},incrementNotificationsCount:function(t,e){var a=e.notificationsCount;t.notificationsCount=a},resetNotificationsCount:function(t){t.notificationsCount=0},setBook:function(t,e){t.book=e}}}),f={data:function(){return{notificationsCount:this.$store.getters.data.notificationsCount}},computed:{count:function(){return this.$store.getters.data.notificationsCount}},watch:{count:function(t){this.notificationsCount=t}},created:function(){var t=this;this.$store.getters.data.signedIn&&this.$http.get("notifications/unread").then((function(e){t.notificationsCount=e.data.notifications_count,t.$store.commit("incrementNotificationsCount",{notificationsCount:e.data.notifications_count})}))},methods:{signOut:function(){var t=this;this.$http.delete("auth/sign_out").then((function(e){t.$store.commit("signOut"),t.$router.push("/").catch((function(t){}))}),(function(t){console.log(t)}))}}},h=f,b=(a("8baf"),a("2877")),_=Object(b["a"])(h,u,m,!1,null,null,null),C=_.exports,k=a("fd2d"),w={components:{appHeader:C,appFooter:k["default"]}},y=w,x=(a("034f"),Object(b["a"])(y,c,d,!1,null,null,null)),S=x.exports,q=a("5887"),P=a.n(q),E=(a("d3b7"),a("8c4f")),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider_area"},[a("div",{staticClass:"single_slider  d-flex align-items-center slider_bg_1"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row align-items-center justify-content-center"},[a("div",{staticClass:"col-xl-10"},[a("div",{staticClass:"slider_text text-center justify-content-center"},[a("router-link",{staticClass:"genric-btn danger circle",attrs:{to:"/books"}},[t._v("Find Nearby Books")]),a("div",{staticClass:"quality"})],1)])])])])])},D=[],O={},N=Object(b["a"])(O,j,D,!1,null,null,null),I=N.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"explorer_europe list_wrap"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 col-lg-12"},[this.$store.getters.data.latitude?t._e():a("h3",{staticClass:"exp_title text-center"},[t._v("Please allow Zajel to access your location")]),t.loading?a("h3",{staticClass:"exp_title text-center"},[t._v("Loading...")]):a("h3",{staticClass:"exp_title text-center"},[t._v(t._s(this.metadata.count)+" Books are available nearby")]),a("div",{staticClass:"col-xl-12 page_nation text-center"},[this.metadata.count?a("paginate",{attrs:{"page-count":this.metadata.total_pages||1,"margin-pages":1,"click-handler":t.paginateCallback,"no-li-surround":!0,"active-class":"active"}}):t._e()],1),a("div",{staticClass:"row"},t._l(t.books,(function(e){return a("div",{staticClass:"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6"},[a("router-link",{attrs:{to:"books/by_name/"+e.friendly_id}},[a("div",{staticClass:"single_explorer"},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:e.image,alt:"book_image"}})]),a("div",{staticClass:"explorer_bottom d-flex"},[a("div",{staticClass:"explorer_info"},[a("div",{attrs:{id:"book-title"}},[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.genre))]),a("p",[a("i",{staticClass:"fa fa-map-marker",staticStyle:{"font-size":"24px",color:"red"}}),t._v(" "+t._s(0===e.distance?"few meters away!":e.distance+" km away"))])])])])])],1)})),0)])])])])])},T=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"})])])])])}],B={data:function(){return{books:[],metadata:{},location_data:{location:null,gettingLocation:!1,errorStr:null}}},created:function(){this.fetchData()},methods:{fetchData:function(t){var e=this,a={page:t,per_page:21,latitude:this.$store.getters.data.latitude,longitude:this.$store.getters.data.longitude};this.$http.get("books",{params:a}).then((function(t){e.books=t.data.books,e.metadata=t.data.metadata}),(function(t){console.log(t)}))},paginateCallback:function(t){this.fetchData(t)}}},A=B,R=Object(b["a"])(A,L,T,!1,null,null,null),U=R.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"explorer_europe list_wrap"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 col-lg-12"},[this.metadata.count?a("h3",{staticClass:"exp_title text-center"},[t._v("You have added "+t._s(this.metadata.count)+" books")]):t.loading?a("h3",{staticClass:"exp_title text-center"},[t._v("Loading...")]):a("div",{staticClass:"mt-5 text-center"},[a("h3",{staticClass:"exp_title"},[t._v("You haven't added any books yet. why don't you add some?")]),a("router-link",{staticClass:"genric-btn primary circle arrow",attrs:{to:"/books/new"}},[t._v("Add book")])],1),a("div",{staticClass:"col-xl-12 page_nation text-center"},[this.metadata.count?a("paginate",{attrs:{"page-count":this.metadata.total_pages||1,"margin-pages":1,"click-handler":t.paginateCallback,"no-li-surround":!0,"active-class":"active"}}):t._e()],1),a("div",{staticClass:"row"},t._l(t.books,(function(e){return a("div",{staticClass:"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6"},[a("router-link",{attrs:{to:"books/by_name/"+e.friendly_id}},[a("div",{staticClass:"single_explorer"},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:e.image,alt:"book_image"}})]),a("div",{staticClass:"explorer_bottom d-flex"},[a("div",{staticClass:"explorer_info"},[a("div",{attrs:{id:"book-title"}},[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.genre))]),e.approved?e.approved?a("div",{staticClass:"badge badge-success",attrs:{role:"alert"}},[t._v(" approved ")]):t._e():a("div",{staticClass:"badge badge-primary",attrs:{role:"alert"}},[t._v(" under review ")])])])])])],1)})),0)])])])])])},V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"})])])])])}],F={data:function(){return{books:[],metadata:{}}},created:function(){this.fetchData()},methods:{fetchData:function(t){var e=this,a={page:t,per_page:21};this.$http.get("my_books",{params:a}).then((function(t){e.books=t.data.books,e.metadata=t.data.metadata}),(function(t){console.log(t)}))},paginateCallback:function(t){this.fetchData(t)}}},G=F,H=Object(b["a"])(G,M,V,!1,null,null,null),Y=H.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){e.handleSubmit;return[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please Login")]),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),a("ValidationProvider",{attrs:{vid:"email",name:"E-mail",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("span",[t._v(t._s(s[0]))])]}}],null,!0)}),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),a("ValidationProvider",{attrs:{vid:"password",name:"Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("span",[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"checkbox mb-3"},[a("label",[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me ")])]),a("div",{staticClass:"text-center"},[a("button",{class:[t.loading?"loading-btn":"","genric-btn primary e-large circle btn-block text-center mb-3"],attrs:{type:"submit"}},[t._v("Login ")]),a("p",[a("span",[t._v("Don't have an account? ")])]),a("u",[a("router-link",{staticClass:"text-center",attrs:{to:"/signup"}},[t._v("Register here")])],1)])],1)]}}])})],1)},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])}],Z=(a("d81d"),a("ac1f"),a("5319"),{data:function(){return{user:{email:"",password:""}}},created:function(){function t(t){g.commit("setLocation",{latitude:t.coords.latitude,longitude:t.coords.longitude})}navigator.geolocation&&navigator.geolocation.getCurrentPosition(t)},methods:{signIn:function(){var t=this;this.$http.post("auth/sign_in",this.user).then((function(e){localStorage.accessToken=e.headers["map"]["access-token"],localStorage.client=e.headers["map"]["client"],localStorage.uid=e.headers["map"]["uid"],localStorage.expiry=e.headers["map"]["expiry"],localStorage.bearer=e.headers["map"]["token-type"],t.$store.commit("signIn",{user_id:e.data.data.id,accessToken:localStorage.accessToken,client:localStorage.client,uid:localStorage.uid,expiry:localStorage.expiry,bearer:localStorage.bearer}),void 0!==t.$route.query.redirect&&null!==t.$route.query.redirect?t.$router.replace(t.$route.query.redirect):t.$router.replace("/"),t.$store.getters.data.latitude&&t.$store.getters.data.longitude&&t.$http.put("users/"+t.$store.getters.data.user_id,{latitude:t.$store.getters.data.latitude,longitude:t.$store.getters.data.longitude})}),(function(t){console.log(t)}))}}}),K=Z,Q=(a("2dc3"),Object(b["a"])(K,z,J,!1,null,null,null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"section-top-border"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-md-6 offset-md-3 col-10 offset-1"},[t._m(1),a("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){e.handleSubmit;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.signUp(e)}}},[a("div",{staticClass:"mb-3"},[a("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",id:"email",name:"email",placeholder:"Email address",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("span",[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("ValidationObserver",[a("div",{staticClass:"mb-3"},[a("ValidationProvider",{attrs:{rules:"confirmed:confirmation"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",{attrs:{for:"password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:"",minlength:"4"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("span",[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"mb-3"},[a("ValidationProvider",{attrs:{vid:"confirmation"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",{attrs:{for:"password_confirmation"}},[t._v("Password Confirmation")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-control",attrs:{type:"password",id:"password_confirmation",placeholder:"Password confirmation",required:""},domProps:{value:t.user.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.user,"password_confirmation",e.target.value)}}}),a("span",[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"first_name"}},[t._v("First Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.first_name,expression:"user.first_name"}],staticClass:"form-control",attrs:{type:"text",id:"first_name",placeholder:"First name",required:""},domProps:{value:t.user.first_name},on:{input:function(e){e.target.composing||t.$set(t.user,"first_name",e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"last_name"}},[t._v("Last Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.last_name,expression:"user.last_name"}],staticClass:"form-control",attrs:{type:"text",id:"last_name",placeholder:"Last name",required:""},domProps:{value:t.user.last_name},on:{input:function(e){e.target.composing||t.$set(t.user,"last_name",e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"phone_number"}},[t._v("Phone number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.phone_number,expression:"user.phone_number"}],staticClass:"form-control",attrs:{type:"number",id:"phone_number",placeholder:"Phone number",required:""},domProps:{value:t.user.phone_number},on:{input:function(e){e.target.composing||t.$set(t.user,"phone_number",e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"phone_number"}},[t._v("Birth date")]),a("v-date-picker",{attrs:{"input-props":{placeholder:"Choose date of birth"},"max-date":new Date("2009-12-31")},model:{value:t.user.birth_date,callback:function(e){t.$set(t.user,"birth_date",e)},expression:"user.birth_date"}})],1),a("div",{staticClass:"mt-10"},[a("button",{class:[t.loading?"loading-btn":"","genric-btn primary circle arrow"],attrs:{type:"submit"}},[t._v("Register")])])],1)]}}])})],1)])])])},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u",[a("h3",{staticClass:"mb-30"},[t._v("Register for new account")])])}],et=a("5530"),at=a("7bb1"),st=a("4c93");Object(at["c"])("email",st["b"]),Object(at["c"])("confirmed",st["a"]),Object(at["c"])("min",st["c"]),Object(at["c"])("required",Object(et["a"])({},st["d"],{message:"This field is required"}));var it={data:function(){return{user:{email:"",password:"",password_confirmation:"",first_name:"",last_name:"",phone_number:"",birth_date:""}}},created:function(){function t(t){g.commit("setLocation",{latitude:t.coords.latitude,longitude:t.coords.longitude})}navigator.geolocation&&navigator.geolocation.getCurrentPosition(t)},methods:{signUp:function(){var t=this;this.$http.post("auth",this.user).then((function(e){localStorage.accessToken=e.headers["map"]["access-token"],localStorage.client=e.headers["map"]["client"],localStorage.uid=e.headers["map"]["uid"],localStorage.expiry=e.headers["map"]["expiry"],localStorage.bearer=e.headers["map"]["token-type"],localStorage.signedIn=!0,t.$store.commit("signIn",{user_id:e.data.data.id}),t.$router.replace("/confirm")}),(function(e){t.$refs.form.setErrors({email:[e.body.errors.email[0]]})})).then((function(e){t.headers=e}))}}},ot=it,rt=(a("8e50"),Object(b["a"])(ot,X,tt,!1,null,null,null)),nt=rt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.confirm(e)}}},[a("h4",{staticClass:"mb-3 mt-30 font-weight-normal text-center"},[t._v("Please check your email for the confirmation code")]),a("label",{staticClass:"sr-only",attrs:{for:"confirmationCode"}},[t._v("Code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmationCode,expression:"user.confirmationCode"}],staticClass:"form-control",attrs:{type:"text",id:"confirmationCode",placeholder:"Confirmation code",required:"",autofocus:""},domProps:{value:t.user.confirmationCode},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmationCode",e.target.value)}}}),t._m(1)])])},ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mt-30 offset-3 col-6"},[a("button",{staticClass:"genric-btn primary e-large circle btn-block text-center mb-3",attrs:{type:"submit"}},[t._v("Submit")])])}],dt={data:function(){return{user:{confirmationCode:null}}},methods:{confirm:function(){var t=this;this.$http.put("users/confirm",{confirmation_code:this.user.confirmationCode}).then((function(e){t.$router.replace("/")}),(function(t){console.log(t)}))}}},ut=dt,mt=(a("312f"),Object(b["a"])(ut,lt,ct,!1,null,null,null)),pt=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"whole-wrap"},[a("div",{staticClass:"container box_1170"},[a("div",{staticClass:"section-top-border"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"mb-20"},[a("img",{staticClass:"img-fluid",attrs:{src:this.book.image,alt:"book_image"}}),this.$store.getters.data.user_id!=this.book.owner_id?a("p",{staticClass:"text-center mt-2"},[a("i",{staticClass:"fa fa-map-marker",staticStyle:{"font-size":"24px",color:"red"}}),t._v(" "+t._s(0===t.book.distance?"few meters away!":t.book.distance+" km away"))]):t._e()]),this.$store.getters.data.signedIn&&this.book.owner_id!=this.$store.getters.data.user_id?a("div",{staticClass:"text-center mb-20"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!this.book.requested&&"available"===this.book.status,expression:"!this.book.requested && this.book.status === 'available'"}],staticClass:"genric-btn primary circle arrow",attrs:{id:"borrow"},on:{click:function(e){return t.borrow(t.book.id)}}},[t._v("Send borrow request")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.book.requested&&"available"===this.book.status,expression:"this.book.requested && this.book.status === 'available'"}],staticClass:"genric-btn primary-border circle arrow",attrs:{id:"cancel"},on:{click:function(e){return t.cancel(t.book.id)}}},[t._v("Cancel borrow request")]),a("button",{directives:[{name:"show",rawName:"v-show",value:"borrowed"===this.book.status,expression:"this.book.status === 'borrowed'"}],staticClass:"genric-btn disable radius circle arrow",attrs:{id:"disabled"}},[t._v("Book is unavailable")])]):this.$store.getters.data.signedIn&&this.book.owner_id==this.$store.getters.data.user_id?a("div",{staticClass:"text-center mb-20"},[a("router-link",{staticClass:"genric-btn primary circle arrow",attrs:{to:this.book.friendly_id+"/edit"}},[t._v("update book details")])],1):this.$store.getters.data.signedIn?t._e():a("div",{staticClass:"text-center mb-20"},[a("router-link",{staticClass:"genric-btn primary circle arrow",attrs:{to:"/login"}},[t._v("Login")])],1)]),a("div",{staticClass:"col-md-8 mt-sm-20"},[a("div",{staticClass:"mb-30"},[a("h2",[t._v(t._s(this.book.title))]),a("small",[t._v(t._s(this.book.page_count)+" pages")]),a("small",[t._v(" | by: "),a("b",[t._v(t._s(this.book.author))])]),t._v(" | "),!1===this.book.approved?a("div",{staticClass:"badge badge-primary",attrs:{role:"alert"}},[t._v(" Under review ")]):"available"===this.book.status?a("div",{staticClass:"badge badge-success",attrs:{role:"alert"}},[t._v(" "+t._s(this.book.status)+" ")]):"unavailable"===this.book.status?a("div",{staticClass:"badge badge-danger",attrs:{role:"alert"}},[t._v(" "+t._s(this.book.status)+" ")]):a("div",{staticClass:"badge badge-info",attrs:{role:"alert"}},[t._v(" "+t._s(this.book.status)+" ")])]),a("p",[t._v(t._s(this.book.language)+" | "+t._s(this.book.genre))]),a("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(this.book.description))])])])])])])])},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"})])])])])}],ft={data:function(){return{book:this.$store.getters.data.book}},methods:{fetchData:function(){var t=this,e={latitude:this.$store.getters.data.latitude,longitude:this.$store.getters.data.longitude};this.$http.get("books/by_name/"+this.$route.params.friendly_id,{params:e}).then((function(t){return t.json()}),(function(t){console.log(t)})).then((function(e){t.book=e}))},borrow:function(t){var e=this;this.$http.post("book_activities",{book_id:t}).then((function(t){e.fetchData()}))},cancel:function(t){var e=this;this.$http.delete("book_activities/"+t).then((function(t){e.fetchData()}))}}},ht=ft,bt=Object(b["a"])(ht,vt,gt,!1,null,null,null),_t=bt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"section-top-border"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-md-6 offset-md-3 col-10 offset-1 "},[t._m(1),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"title"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"Book title",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"author"}},[t._v("Author")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"form-control",attrs:{type:"text",id:"author",placeholder:"Book author",required:""},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"page_count"}},[t._v("Page count")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.page_count,expression:"page_count"}],staticClass:"form-control",attrs:{type:"number",id:"page_count",min:"1",placeholder:"Book page count",required:""},domProps:{value:t.page_count},on:{input:function(e){e.target.composing||(t.page_count=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"published_at"}},[t._v("Published at")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.published_at,expression:"published_at"}],staticClass:"form-control",attrs:{type:"number",id:"published_at",max:"2020",placeholder:"Book published at",required:""},domProps:{value:t.published_at},on:{input:function(e){e.target.composing||(t.published_at=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",[t._v("Language")]),a("v-select",{staticClass:"style-chooser",attrs:{options:t.languages,placeholder:"Select book language"},on:{input:t.setLanguage}})],1),a("div",{staticClass:"mb-3"},[a("label",[t._v("Genre")]),a("v-select",{staticClass:"style-chooser",attrs:{options:t.genres,placeholder:"Select genre",label:"name"},on:{input:t.setGenre}})],1),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"description",rows:"5",placeholder:"Book description",required:""},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),a("div",{staticClass:"mt-10"},[t._m(2),a("span",{attrs:{id:"file-selected"}}),a("input",{attrs:{id:"file-upload",type:"file",accept:"image/*"},on:{change:function(e){return t.uploadImage(e)}}})]),t._m(3),t._m(4)])])])])])},kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u",[a("h3",{staticClass:"mb-30"},[t._v("Add new book")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload",id:"file-upload-label"}},[a("i",{staticClass:"fa fa-cloud-upload"}),t._v(" Choose book cover ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10"},[a("small",[t._v("* Your book needs to be approved by Zajel moderators after submission ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10"},[a("button",{staticClass:"genric-btn primary circle arrow",attrs:{type:"submit"}},[t._v("Submit")])])}],wt=(a("a4d3"),a("e01a"),a("b0c0"),{data:function(){return{genres:[],languages:[],title:"",description:"",author:"",page_count:"",language:"",image:"",published_at:"",genre_id:""}},created:function(){var t=this;this.$http.get("metadata/").then((function(e){t.genres=e.data["genres"],t.languages=e.data["languages"]}))},methods:{setLanguage:function(t){this.language=t},setGenre:function(t){this.genre_id=t.id},submit:function(){var t=this,e=new FormData;e.append("title",this.title),e.append("description",this.description),e.append("author",this.author),e.append("page_count",this.page_count),e.append("language",this.language),e.append("published_at",this.published_at),e.append("genre_id",this.genre_id),e.append("image",this.image,this.image.name),this.$http.post("books",e).then((function(e){t.$router.replace("/books/by_name/"+e.body.friendly_id)}))},uploadImage:function(t){document.getElementById("file-selected").textContent=t.target.files[0].name,this.image=t.target.files[0]}}}),yt=wt,xt=(a("b9b9"),Object(b["a"])(yt,Ct,kt,!1,null,null,null)),$t=xt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"whole-wrap"},[a("div",{staticClass:"container box_1170"},[a("div",{staticClass:"section-top-border"},[t.loading?a("h3",{staticClass:"text-center"},[t._v("Loading...")]):a("div",{staticClass:"row"},[t.sent_requests.length?t._e():a("div",{staticClass:"offset-3 col-6 mt-5 text-center",staticStyle:{height:"300px"}},[a("h3",[t._v("No sent requests")]),a("router-link",{staticClass:"mt-4 genric-btn primary circle arrow",attrs:{to:"/books"}},[t._v("Explore nearby books")])],1),t._l(t.sent_requests,(function(e){return a("div",{staticClass:"offset-sm-3 col-sm-9 offset-md-2 col-md-8 col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3 col-3"},[a("div",{staticClass:"mb-20 text-center"},[a("img",{staticClass:"img-fluid mb-3",attrs:{src:e.book.image,alt:"borrowed_book"}}),"pending"===e.status?a("div",{staticClass:"badge badge-primary",attrs:{role:"alert"}},[t._v(" "+t._s(e.status)+" ")]):"accepted"===e.status?a("div",{staticClass:"badge badge-success",attrs:{role:"alert"}},[t._v(" "+t._s(e.status)+" ")]):a("div",{staticClass:"badge badge-danger",attrs:{role:"alert"}},[t._v(" "+t._s(e.status)+" ")])])]),a("div",{staticClass:"col-9"},[a("h3",[a("router-link",{attrs:{to:"books/by_name/"+e.book.friendly_id}},[t._v(t._s(e.book.title))])],1),a("p",[t._v("You have requested "),a("b",[t._v(t._s(e.lender.name))]),t._v("'s book "+t._s(t.formatDistance(new Date,new Date(e.created_at)))+" ago")]),a("div",{staticClass:"text-center"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:"accepted"===e.status,expression:"sent.status === 'accepted'"}],staticClass:"genric-btn success circle",attrs:{id:e.conversation_id,to:"/conversations/"+e.conversation_id+"/messages"}},[t._v("Go to Conversation")])],1)])]),a("hr")])}))],2)])])])])},qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])}],Pt={data:function(){return{sent_requests:[]}},created:function(){this.$store.state.signedIn?this.fetchSentRequests():this.$router.push("/login")},methods:{fetchSentRequests:function(){var t=this;this.$http.get("book_activities?type=sent").then((function(e){t.sent_requests=e.data["book_activities"]}))}}},Et=Pt,jt=(a("8baf6"),Object(b["a"])(Et,St,qt,!1,null,null,null)),Dt=jt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"whole-wrap"},[a("div",{staticClass:"container box_1170"},[a("div",{staticClass:"section-top-border"},[t.loading?a("h3",{staticClass:"text-center"},[t._v("Loading...")]):a("div",{staticClass:"row"},[t.received_requests.length?t._e():a("div",{staticClass:"mt-5 offset-3 col-6 text-center",staticStyle:{height:"300px"}},[a("h3",[t._v("No received requests")]),a("br"),a("h4",[t._v("If you haven't added any books yet. why don't you add some?")]),a("router-link",{staticClass:"mt-4 genric-btn primary circle arrow",attrs:{to:"/books/new"}},[t._v("Add book")])],1),t._l(t.received_requests,(function(e){return a("div",{staticClass:"offset-sm-3 col-sm-9 offset-md-2 col-md-8 col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3 col-3"},[a("div",{staticClass:"mb-20 text-center"},[a("img",{staticClass:"img-fluid mb-3",attrs:{src:e.book.image,alt:"borrowed_book"}}),a("div",{class:"pending"===e.status?"badge badge-primary":"badge badge-success",attrs:{role:"alert"}},[t._v(" "+t._s(e.status)+" ")])])]),a("div",{staticClass:"col-9"},[a("h3",[a("router-link",{attrs:{to:"books/by_name/"+e.book.friendly_id}},[t._v(t._s(e.book.title))])],1),a("p",[a("b",[t._v(t._s(e.borrower.name))]),t._v(" requested your book "+t._s(t.formatDistance(new Date,new Date(e.created_at)))+" ago")]),a("div",{staticClass:"text-center"},[a("button",{directives:[{name:"show",rawName:"v-show",value:"pending"===e.status,expression:"received.status === 'pending'"}],class:"m-2 genric-btn info circle accept_"+e.id,attrs:{id:e.id},on:{click:t.accept}},[t._v("Accept")]),a("button",{directives:[{name:"show",rawName:"v-show",value:"pending"===e.status,expression:"received.status === 'pending'"}],class:"m-2 genric-btn primary circle reject_"+e.id,attrs:{id:e.id},on:{click:t.reject}},[t._v("Reject")]),a("router-link",{directives:[{name:"show",rawName:"v-show",value:"accepted"===e.status,expression:"received.status === 'accepted'"}],staticClass:"genric-btn success circle",attrs:{id:e.conversation_id,to:"/conversations/"+e.conversation_id+"/messages"}},[t._v("Go to Conversation")])],1)])]),a("hr")])}))],2)])])])])},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])}],It={data:function(){return{received_requests:[]}},watch:{received_requests:function(t){this.received_requests=t}},created:function(){this.$store.state.signedIn?this.fetchReceivedRequests():this.$router.push("/login")},methods:{accept:function(t){var e=this;this.$http.put("book_activities/"+t.target.id,{type:"accept"}).then((function(){e.fetchReceivedRequests()}))},reject:function(t){var e=this;confirm("Do you really want to reject this request? this action is not reversible")&&this.$http.put("book_activities/"+t.target.id,{type:"reject"}).then((function(){e.fetchReceivedRequests()}))},fetchReceivedRequests:function(){var t=this;this.$http.get("book_activities?type=received").then((function(e){t.received_requests=e.data["book_activities"]}))}}},Lt=It,Tt=Object(b["a"])(Lt,Ot,Nt,!1,null,null,null),Bt=Tt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"container-fluid h-100 mb-30 mt-30"},[a("div",{staticClass:"row justify-content-center h-100"},[a("div",{staticClass:"col-md-8 col-xl-6 chat"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header msg_head"},[a("div",{staticClass:"d-flex bd-highlight"},[this.bookActivity.borrower_id==t.currentUserId?a("div",{staticClass:"user_info"},[a("span",[t._v("Chat with "+t._s(this.bookActivity.lender_name))])]):t._e(),this.bookActivity.lender_id==t.currentUserId?a("div",{staticClass:"user_info"},[a("span",[t._v("Chat with "+t._s(this.bookActivity.borrower_name))])]):t._e()])]),a("div",{staticClass:"card-body msg_card_body",attrs:{id:"list"}},t._l(t.messages,(function(e){return a("div",[e.sender_id==t.currentUserId?a("div",{staticClass:"d-flex justify-content-end mb-4"},[a("div",{staticClass:"msg_cotainer_send text-center"},[t._v(" "+t._s(e.content)+" "),a("span",{staticClass:"msg_time_send"},[t._v(t._s(t.formatDistance(new Date,new Date(e.created_at)))+" ago")])])]):a("div",{staticClass:"d-flex justify-content-start mb-4"},[a("div",{staticClass:"msg_cotainer text-center"},[a("span",{staticClass:"msg_time"},[t._v(t._s(t.formatDistance(new Date,new Date(e.created_at)))+" ago")]),t._v(" "+t._s(e.content)+" ")])])])})),0),a("infinite-loading",{on:{infinite:t.infiniteHandler}},[a("div",{attrs:{slot:"no-more"},slot:"no-more"})]),a("div",{staticClass:"card-footer"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control type_msg",attrs:{type:"text",name:"",id:"message_box",placeholder:"Type your message..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._m(1)])])])],1)])])])])},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"input-group-text send_btn",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-paper-plane-o"})])])}],Ut=(a("99af"),a("498a"),a("e166")),Mt=a.n(Ut),Vt={components:{InfiniteLoading:Mt.a},data:function(){return{currentUserId:this.$store.state.user_id,pageNumber:1,message:"",messages:[],bookActivity:{}}},created:function(){this.$store.state.signedIn?this.fetchData():this.$router.push("/login")},channels:{ConversationChannel:{received:function(t){this.messages.push(t.object),this.scrollDown()}}},mounted:function(){this.$cable._connect("wss://api.zajelbook.com/cable?access-token="+this.$store.getters.data.accessToken+"&client="+this.$store.getters.data.client+"&uid="+this.$store.getters.data.uid),this.$cable.subscribe({channel:"ConversationChannel",id:this.$route.params.id})},methods:{unsubscribe:function(){this.$cable.unsubscribe({channel:"ConversationChannel",id:this.$route.params.id})},fetchData:function(){var t=this;this.$http.get("conversations/"+this.$route.params.id+"/messages",{params:{page:this.pageNumber++,per_page:30}}).then((function(e){t.messages=t.messages.concat(e.data.messages),t.bookActivity=e.data.book_activity}),(function(t){console.log(t)})).then((function(t){}))},sendMessage:function(){var t=this,e=this.message;""==!e.trim()&&this.$http.post("conversations/"+this.$route.params.id+"/messages",{content:this.message}).then((function(e){document.getElementById("message_box").value="",t.message=""}),(function(t){console.log(t)}))},scrollDown:function(){$("#list").stop().animate({scrollTop:$("#list")[0].scrollHeight})},infiniteHandler:function(t){var e=this;this.$http.get("conversations/"+this.$route.params.id+"/messages",{params:{page:this.pageNumber,per_page:30}}).then((function(a){a.data.messages&&a.data.messages.length?(e.messages=e.messages.concat(a.data.messages),e.pageNumber++,t.loaded()):0===a.data.errors.length&&t.complete()})).then((function(t){e.scrollDown()}))}}},Ft=Vt,Gt=(a("6a3c"),Object(b["a"])(Ft,At,Rt,!1,null,null,null)),Ht=Gt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"section-top-border"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-md-6 offset-md-3 col-10 offset-1 "},[t._m(1),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"title"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"Book title",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"author"}},[t._v("Author")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"form-control",attrs:{type:"text",id:"author",placeholder:"Book author",required:""},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"page_count"}},[t._v("Page count")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.page_count,expression:"page_count"}],staticClass:"form-control",attrs:{type:"number",id:"page_count",min:"1",placeholder:"Book page count",required:""},domProps:{value:t.page_count},on:{input:function(e){e.target.composing||(t.page_count=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"published_at"}},[t._v("Published at")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.published_at,expression:"published_at"}],staticClass:"form-control",attrs:{type:"number",id:"published_at",min:"1900",max:"2020",placeholder:"Book published at",required:""},domProps:{value:t.published_at},on:{input:function(e){e.target.composing||(t.published_at=e.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",[t._v("Language")]),a("v-select",{staticClass:"style-chooser",attrs:{options:t.languages,placeholder:"Select book language"},on:{input:t.setLanguage},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})],1),a("div",{staticClass:"mb-3"},[a("label",[t._v("Genre")]),a("v-select",{staticClass:"style-chooser",attrs:{options:t.genres,placeholder:"Select genre",label:"name"},on:{input:t.setGenre},model:{value:t.genre,callback:function(e){t.genre=e},expression:"genre"}})],1),a("div",{staticClass:"mb-3"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"description",rows:"5",placeholder:"Book description",required:""},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),a("div",{staticClass:"mt-10"},[a("img",{staticClass:"mb-3",attrs:{src:this.current_image,width:"100px",alt:"book_image"}}),a("br"),t._m(2),a("span",{attrs:{id:"file-selected"}}),a("input",{attrs:{id:"file-upload",type:"file",accept:"image/*"},on:{change:function(e){return t.uploadImage(e)}}})]),t._m(3)])])])])])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"},[a("h3")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u",[a("h3",{staticClass:"mb-30"},[t._v("update book information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"custom-file-upload",attrs:{for:"file-upload",id:"file-upload-label"}},[a("i",{staticClass:"fa fa-cloud-upload"}),t._v(" Choose book cover ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10"},[a("button",{staticClass:"genric-btn primary circle arrow",attrs:{type:"submit"}},[t._v("Submit")])])}],Jt=(a("4de4"),a("3ca3"),a("ddb0"),a("2b3d"),{data:function(){return{genres:[],languages:[],genre:null,current_image:"",id:"",title:"",description:"",author:"",page_count:"",language:"",image:"",published_at:"",genre_id:""}},created:function(){var t=this;this.$http.get("metadata/").then((function(e){t.genres=e.data["genres"],t.languages=e.data["languages"]})),this.$http.get("books/by_name/"+this.$route.params.friendly_id).then((function(e){var a=e.data;t.id=a.id,t.title=a.title,t.author=a.author,t.page_count=a.page_count,t.language=a.language,t.genre_id=a.genre_id,t.genre=t.genres.filter((function(t){return t.id===a.genre_id})),t.published_at=a.published_at,t.description=a.description,t.current_image=a.image,fetch(a.image).then((function(t){return t.blob()})).then((function(e){t.image=e}))}))},methods:{setLanguage:function(t){this.language=t},setGenre:function(t){this.genre_id=t.id},submit:function(){var t=this,e=new FormData;e.append("title",this.title),e.append("description",this.description),e.append("author",this.author),e.append("page_count",this.page_count),e.append("language",this.language),e.append("published_at",this.published_at),e.append("genre_id",this.genre_id),e.append("image",this.image,this.image.name),this.$http.put("books/"+this.id,e).then((function(e){t.$router.replace("/books/by_name/"+e.body.friendly_id)}))},uploadImage:function(t){document.getElementById("file-selected").textContent=t.target.files[0].name,this.image=t.target.files[0],this.current_image=URL.createObjectURL(t.target.files[0])}}}),Zt=Jt,Kt=(a("b42f"),Object(b["a"])(Zt,Yt,zt,!1,null,null,null)),Qt=Kt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"explorer_europe list_wrap"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 col-lg-12"},[a("h3",{staticClass:"exp_title text-center"},[t._v("Notification Center")]),t.loading?a("h3",{staticClass:"exp_title text-center"},[t._v("Loading your list...")]):a("table",{staticClass:"table table-hover"},[t._m(1),a("tbody",[this.notifications.length?t._e():a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("no notifications found")])]),t._l(t.notifications,(function(e){return a("tr",[a("td",{staticClass:"text-center",attrs:{scope:"row"}},[a("router-link",{attrs:{to:e.page}},[t._v(t._s(e.content))])],1),a("td",[a("router-link",{attrs:{to:e.page}},[t._v(t._s(new Date(e.created_at).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})))])],1)])}))],2)]),a("div",{staticClass:"col-xl-12 page_nation text-center"},[this.metadata.count?a("paginate",{attrs:{"page-count":this.metadata.total_pages||1,"margin-pages":1,"click-handler":t.paginateCallback,"no-li-surround":!0,"active-class":"active"}}):t._e()],1)])])])])])},Xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bradcam_area bradcam_bg_2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"bradcam_text text-center"})])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Message")]),a("th",{attrs:{scope:"col"}},[t._v("Time")])])])}],te={data:function(){return{notifications:[],metadata:{}}},created:function(){this.fetchData(),0!==this.$store.getters.data.notificationsCount&&this.updateUnreadCount()},methods:{updateUnreadCount:function(){this.$http.put("notifications/read"),this.$store.commit("resetNotificationsCount")},fetchData:function(t){var e=this,a={page:t,per_page:30};this.$http.get("notifications",{params:a}).then((function(t){e.metadata=t.data.metadata,e.notifications=t.data.notifications.map((function(t){var e=Object.assign({},t);return"new_message"===t.payload.type?e.page="conversations/"+t.payload.conversation_id+"/messages":"borrow_request"===t.payload.type?e.page="lend_requests":e.page="borrow_requests",e}))}))},paginateCallback:function(t){this.fetchData(t)}}},ee=te,ae=(a("5954"),Object(b["a"])(ee,Wt,Xt,!1,null,null,null)),se=ae.exports;p["default"].use(E["a"]);var ie=[{path:"/",name:"Home",component:I},{path:"/confirm",component:pt},{path:"/books",name:"Books",component:U},{path:"/my_books",component:Y,meta:{requiresAuth:!0}},{path:"/login",name:"SignIn",component:W,meta:{requiresAuth:!1}},{path:"/signup",name:"SignUp",component:nt,meta:{requiresAuth:!1}},{path:"/books/new",component:$t,meta:{requiresAuth:!0}},{path:"/books/:id",name:"BookDetailsById",component:_t},{path:"/books/by_name/:friendly_id",name:"BookDetails",component:_t,beforeEnter:function(t,e,a){p["default"].http.get("books/by_name/"+t.params.friendly_id,{params:{latitude:g.getters.data.latitude,longitude:g.getters.data.longitude}}).then((function(t){g.commit("setBook",t.body),a()})).catch((function(t){console.log(t),a("/")}))}},{path:"/books/by_name/:friendly_id/edit",component:Qt,beforeEnter:function(t,e,a){a()}},{path:"/borrow_requests",name:"BorrowRequests",component:Dt},{path:"/lend_requests",name:"LendRequests",component:Bt},{path:"/notifications",component:se},{path:"/conversations/:id/messages",component:Ht},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/policy",name:"Policy",component:function(){return a.e("about").then(a.bind(null,"729e"))}},{path:"/terms",name:"Terms",component:function(){return a.e("about").then(a.bind(null,"51c5"))}}],oe=new E["a"]({routes:ie,mode:"history",scrollBehavior:function(){return{x:0,y:0}}}),re=oe,ne=a("d567"),le=a.n(ne);p["default"].use(le.a,{debug:!0,debugLevel:"error",connectImmediately:!1});var ce=a("1556"),de=a("1157"),ue=a.n(de),me=a("5637"),pe=a.n(me),ve=a("4d37"),ge=a("a65d"),fe=a.n(ge),he=new pe.a(".nprogress-container");function be(t){g.commit("setLocation",{latitude:t.coords.latitude,longitude:t.coords.longitude})}window.$=ue.a,p["default"].prototype.formatDistance=ce["a"],p["default"].config.productionTip=!1,p["default"].use(i["a"]),p["default"].use(P.a),p["default"].use(pe.a),p["default"].use(fe.a,{theme:"toasted-primary",position:"top-right",duration:5e3,keepOnHover:!0,action:{text:"Cancel",onClick:function(t,e){e.goAway(0)}}}),p["default"].component("NprogressContainer",ve["a"]),p["default"].component("paginate",r.a),p["default"].component("v-select",l.a),p["default"].component("ValidationProvider",at["b"]),p["default"].component("ValidationObserver",at["a"]),navigator.geolocation&&navigator.geolocation.getCurrentPosition(be),p["default"].http.options.root="https://zajel.mylestone.life/api/",re.beforeEach((function(t,e,a){he.start(),t.matched.some((function(t){return t.meta.requiresAuth}))?"true"!==localStorage.signedIn?a({path:"/login",query:{redirect:t.fullPath}}):a():t.matched.some((function(t){return!1===t.meta.requiresAuth}))&&"true"===localStorage.signedIn?a({path:"/"}):a()})),re.afterEach((function(t,e){he.done()})),p["default"].mixin({computed:{loading:function(){return g.state.loading}}}),p["default"].http.interceptors.push((function(t,e){g.state.loading=!0,he.start(),t.headers.set("access-token",localStorage.accessToken),t.headers.set("client",localStorage.client),t.headers.set("uid",localStorage.uid),t.headers.set("expiry",localStorage.expiry),t.headers.set("token-type",localStorage.bearer),e((function(t){switch(g.state.loading=!1,he.done(),t.status){case 200:""!==t.data.message&&void 0!==t.data.message&&p["default"].toasted.success(t.data.message);break;case 400:if("string"===typeof t.data.message)p["default"].toasted.error(t.data.message);else if("object"===Object(s["a"])(t.data.message))for(var e in t.data.message)p["default"].toasted.error(t.data.message[e]);break;case 401:p["default"].toasted.error(t.data.message),g.commit("signOut"),re.push("/login").catch((function(t){}));break;case 403:p["default"].toasted.error(t.data.message),re.push("/confirm").catch((function(t){}));break;case 404:case 423:p["default"].toasted.error(t.data.message);break;case 422:if(t.body.data.hasOwnProperty("errors")||"string"!==typeof t.body.data.message)for(var a in t.body.errors["full_messages"])p["default"].toasted.error(t.body.errors["full_messages"][a]);else p["default"].toasted.error(t.body.data.message);break;case 500:p["default"].toasted.error(t.data.message);break;default:p["default"].toasted.error("Oops... Something went wrong: "+error.message+". Please try again")}}))})),new p["default"]({el:"#app",components:{App:S},router:re,store:g,render:function(t){return t(S)}})},5954:function(t,e,a){"use strict";var s=a("0ce1"),i=a.n(s);i.a},6860:function(t,e,a){},"6a3c":function(t,e,a){"use strict";var s=a("d565"),i=a.n(s);i.a},"7b3d":function(t,e,a){},"7e0a":function(t,e,a){},"85ec":function(t,e,a){},"8baf":function(t,e,a){"use strict";var s=a("6860"),i=a.n(s);i.a},"8baf6":function(t,e,a){"use strict";var s=a("096b"),i=a.n(s);i.a},"8e50":function(t,e,a){"use strict";var s=a("7e0a"),i=a.n(s);i.a},"94d4":function(t,e,a){"use strict";var s=a("2e93"),i=a.n(s);e["default"]=i.a},b42f:function(t,e,a){"use strict";var s=a("1c80"),i=a.n(s);i.a},b9b9:function(t,e,a){"use strict";var s=a("7b3d"),i=a.n(s);i.a},c037:function(t,e,a){t.exports=a.p+"img/5.47cb4385.png"},d170:function(t,e,a){},d565:function(t,e,a){},ef00:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer text-center"},[a("div",{staticClass:"footer_top"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-xl-4 col-md-6 col-lg-3"},[a("div",{staticClass:"footer_widget"},[a("h3",{staticClass:"footer_title"},[t._v(" Useful Links ")]),a("ul",[a("li",[a("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),a("li",[a("router-link",{attrs:{to:"/policy"}},[t._v("Privacy Policy")])],1),a("li",[a("router-link",{attrs:{to:"/terms"}},[t._v("Terms of Service")])],1)])])]),t._m(1)])])]),a("div",{staticClass:"copy-right_text"},[a("div",{staticClass:"container"},[a("div",{staticClass:"footer_border"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("p",{staticClass:"copy_right text-center"},[t._v(" Copyright  "+t._s((new Date).getFullYear())+" All rights reserved | This template is made with "),a("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),t._v(" by "),a("a",{attrs:{href:"https://colorlib.com",target:"_blank",rel:"noreferrer"}},[t._v("Colorlib")])])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xl-4 col-md-6 col-lg-4"},[a("div",{staticClass:"footer_widget"},[a("p",[t._v(" Again! it's "),a("a",{attrs:{target:"_blank",rel:"noreferrer",href:"https://mhdrahmoun.me"}},[a("b",{staticStyle:{color:"rgb(248, 25, 67)"}},[t._v("mhdrahmoun")])]),t._v(" & "),a("a",{attrs:{target:"_blank",rel:"noreferrer",href:"https://github.com/MohammedMokresh"}},[a("b",{staticStyle:{color:"rgb(248, 25, 67)"}},[t._v("Mohammed Mokresh")])])]),a("p",[t._v("contact us: "),a("b",{staticStyle:{color:"rgb(248, 25, 67)"}},[t._v("support@bernovia.com")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xl-4 col-md-6 col-lg-4"},[a("div",{staticClass:"footer_widget"},[a("h3",{staticClass:"footer_title"},[t._v(" Find us on play store ")]),a("a",{attrs:{href:""}},[a("img",{attrs:{src:"img/google-play-badge.svg",width:"50%",alt:"google_play_badge"}})])])])}]},fd2d:function(t,e,a){"use strict";var s=a("ef00"),i=a("94d4"),o=a("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},ff9c:function(t,e,a){}});
//# sourceMappingURL=app.4be13cd2.js.map